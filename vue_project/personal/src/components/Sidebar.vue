<template>
  <div class="sidebar" @mouseenter="toggleStatus(true)" @mouseleave="toggleStatus(false)">
    <div
      class="sidebar-switch"
      @click="TOGGLE_STATUS({key:'sidebarStatus', value:!sidebarStatus})"
      :class="{active: sidebarStatus}"
    >
      <span class="first"></span>
      <span class="second"></span>
    </div>
    <ul :class="{active: sidebarStatus}" class="router-link-inner-layout">
      <li>
        <router-link to="/">
          <span class="iconfont">&#xe600;</span>首页
        </router-link>
      </li>
      <li>
        <router-link to="/About">
          <span class="iconfont">&#xe673;</span>关于
        </router-link>
      </li>
      <li>
        <router-link to="/productions">
          <span class="iconfont">&#xe673;</span>作品集
        </router-link>
      </li>
      <li>
        <router-link to="/call">
          <span class="iconfont">&#xe74a;</span>联系我
        </router-link>
      </li>
    </ul>
  </div>
</template>

<script>
import { mapState, mapMutations } from "vuex";
import types from "@/store/types.js";
export default {
  props: {
    params: Object
  },
  data: function() {
    return {
      onSidebar: false,
      timer: null
    };
  },
  computed: {
    ...mapState({
      sidebarStatus: "sidebarStatus"
    })
  },
  methods: {
    ...mapMutations([types.TOGGLE_STATUS]),
    toggleStatus(status){
      clearTimeout(this.timer);
      this.TOGGLE_STATUS({key:'sidebarStatus', value:status});
    }
  },
  watch: {
   
  },
  created() {
    
    this.timer = setTimeout(() => {
      this.TOGGLE_STATUS({key:'sidebarStatus', value:false});
    }, 2000)
  }
};
</script>

<style lang="less">
.sidebar {
  position: relative;
  .sidebar-switch {
    cursor: pointer;
    border-radius: 3px;
    position: fixed;
    z-index: 3;
    left: @r;
    top: @r;
    width: 36px;
    height: 36px;
    background: @yellow;
    &.active {
      &::before {
        // width: 55%;
        transform: rotate(-33deg);
      }
      &::after {
        // width: 55%;
        transform: rotate(49deg);
      }
    }

    .line() {
      content: "";
      position: absolute;
      width: 50%;
      left: 50%;
      // transform: translateX(-50%);
      margin-left: -11px;
      height: 3px;
      background: #ffffff;
      transform-origin: 100% 0;
      transition: all 0.4s;
    }
    &::before {
      .line();
      top: 10px;
    }
    &::after {
      .line();
      bottom: 10px;
    }
  }
  ul.router-link-inner-layout {
    background: @black;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 2;
    transform: translateX(-100%);
    padding-left: @r;
    padding-top: 150px;
    width: 150px;
    height: 100vh;
    transition: transform 0.4s;
    &.active {
      transform: translateX(0%);
    }
    li {
      margin-bottom: @n-s;
      a {
        color: #fff;
        font-weight: 900;
        &:hover {
          color: @yellow;
        }
        &.router-link-exact-active {
          color: @yellow;
        }
        span {
          margin-right: @p-s;
          color: #fff;
        }
      }
    }
  }
}
</style>