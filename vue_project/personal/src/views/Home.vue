<template>
  <div class="home app-view">
    <Sidebar></Sidebar>

    <div class="content">
      <h3>HELLO!</h3>
      <h2>{{paintingFont}}</h2>
      <p>既然来了, 不妨留下足迹再走吧</p>
      <ul class="about-link">
        <li class="normal light" @click="goto('About')">
          <span class="iconfont">&#xe63c;</span>了解更多
        </li>
        <li class="normal" @click="goto('Productions')">
          <span class="iconfont">&#xe673;</span>作品集
        </li>
      </ul>
    </div>
  </div>
</template>

<script>
import router from "../router/index";
import Sidebar from "../components/Sidebar";


export default {
  components: {
    Sidebar
  },
  data: function() {
    return {
      paintingFont: ""
    };
  },
  
  methods: {
    drawText: function(arr) {
      var newArray = [];
      // 标志字体增加方向
      var flag = 1;
      // 字体索引
      var index = 0;
      // 当前遍历字符串所属数组的索引
      var num = 0;
      setInterval(() => {
        var array = arr[num].split("");
        // 更新显示文字
        if (index < array.length && flag == 1) {
          newArray.push(array[index]);
          this.paintingFont = newArray.join("");
          index += flag;
        } else if (index <= array.length && flag != 1) {
          index += flag;
          newArray.pop(array[index]);
          this.paintingFont = newArray.join("");
        }
        // 切换正方向
        if (index <= 0 || index >= array.length) {
          flag *= -1;
        }
        // 更改动画文字
        if (index == 0) {
          if (!num) {
            num = 1;
          } else {
            num = 0;
          }
        }
      }, 100);
    },
    goto(page) {
      router.push({ name: page });
    }
  },
  created() {
    this.drawText(["我是web前端工程师", "很高兴您的光临"]);
  }
};
</script>

<style lang="less" scoped>
.home {
  // background: #6d6356;
  background: url(../assets/img/index-bg.jpg) no-repeat;
  background-size: cover;
  // background-position: -160px -120px;
  .f-s();
  &::before {
    content: "";
    .mask();
  }
  .content {
    position: absolute;
    left: 50%;
    top: 50%;
    right: auto;
    padding: 16px;
    h3 {
      color: #ffffff;
      font-size: 16px;
    }
    h2 {
      color: #ffffff;
      font-size: 32px;
      font-weight: 900;
      position: absolute;
      left: 16px;
      top: 40px;
    }
    p {
      margin-top: 70px;
      margin-bottom: @n-s;
      color: #ffffff;
    }
    .about-link {
      // margin: 0 auto;
      display: flex;
      justify-content: start;
      .normal {
        cursor: pointer;
        border-radius: @n-s;
        padding: @p-s @n-s;
        border: 2px solid @yellow;
        color: @yellow;
        margin-right: @n-s;
        &:hover {
          background: @yellow;
          color: #ffffff;
          span {
            color: #ffffff;
          }
        }
        span {
          color: @yellow;
          margin-right: @p-s;
        }
      }
      .light {
        background: @yellow;
        color: #ffffff;
        &:hove {
          background: #555555;
          border: 2px solid #555555;
        }
        span {
          color: #ffffff;
        }
      }
    }
  }
}
</style>