//服务层

class API {

  createData(modelName, o) {

    //modelName: 模型名称, string
    //o: 创建的数据, object
    return model[modelName].create(o);
  }
  //添加数据


  findAllData(modelName, where, attributes, offset = 0, limit, order = ["id"]) {
    //modelName: 模型名称, string
    //where: 查询条件, object
    //attributes: 查询字段, array
    // order: 排序依据, array
    // limit: 查询数量 number
    // offset 结果偏移量 number

    return model[modelName].findAll({
      where,
      attributes,
      order,
      offset,
      limit: 3
    })
  }
  //查询数据 返回promiseu


  //更新数据
  updateData(modelName, values, condition) {
    //modelName: 模型名称, string
    //values: 需要设置的数据, object
    //condition: 条件, object
    return model[modelName].update(values, {
      where: condition
    });
  }

  //删除数据
  destroyData(modelName, condition) {
    //modelName: 模型名称, string
    //condition: 条件, object
    return model[modelName].destroy({
      where: condition
    });
  }

  //查询数据表的记录数
  count(modelName, condition) {
    //modelName:  模型名称, string
    //condition: 条件, object
    return model[modelName].count({
      where: condition
    });
  }

  //原始查询
  query(sql, replacements) {
    //sql: 原始sql语句,
    //replacements: sql语句预处理字段
    return sequelize.query(sql, {
      replacements,
      type: sequelize.QueryTypes.SELECT
    });
  }


}

module.exports = new API();